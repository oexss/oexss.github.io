<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>Migrating to Bootstrap 5.2 | Tommas</title>
<meta name=description content="An experience report in migrating Docsy from Bootstrap 4 to 5.2, with insights and instructions.
"><meta property="og:url" content="https://t.is-local.org/en/blog/2023/06/05/migrating-to-bootstrap-5.2/"><meta property="og:site_name" content="Tommas"><meta property="og:title" content="Migrating to Bootstrap 5.2"><meta property="og:description" content="An experience report in migrating Docsy from Bootstrap 4 to 5.2, with insights and instructions."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="blog"><meta property="article:published_time" content="2023-06-05T00:00:00+00:00"><meta property="article:modified_time" content="2024-07-06T10:20:15+08:00"><meta itemprop=name content="Migrating to Bootstrap 5.2"><meta itemprop=description content="An experience report in migrating Docsy from Bootstrap 4 to 5.2, with insights and instructions."><meta itemprop=datePublished content="2023-06-05T00:00:00+00:00"><meta itemprop=dateModified content="2024-07-06T10:20:15+08:00"><meta itemprop=wordCount content="1556"><meta name=twitter:card content="summary"><meta name=twitter:title content="Migrating to Bootstrap 5.2"><meta name=twitter:description content="An experience report in migrating Docsy from Bootstrap 4 to 5.2, with insights and instructions."><link rel=preload href=/scss/main.min.d1b1210e55a88e57ccae3b62671f39ce255d62f8f7780108fde3cbbb64b0f3d5.css as=style><link href=/scss/main.min.d1b1210e55a88e57ccae3b62671f39ce255d62f8f7780108fde3cbbb64b0f3d5.css rel=stylesheet><script src=https://code.jquery.com/jquery-3.7.1.min.js integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin=anonymous></script><script defer src=https://unpkg.com/lunr@2.3.9/lunr.min.js integrity=sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli crossorigin=anonymous></script><link rel=stylesheet href=/css/prism.css></head><body class="td-page td-blog"><header><nav class="td-navbar js-navbar-scroll" data-bs-theme=dark><div class="container-fluid flex-column flex-md-row"><a class=navbar-brand href=/en/><span class="navbar-brand__logo navbar-logo"><svg t="1720198081789" class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" p-id="5607" width="200" height="200" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M512 85.333333A362.666667 362.666667.0 01874.666667 448C874.666667 725.333333 640 960 512 960S149.333333 725.333333 149.333333 448A362.666667 362.666667.0 01512 85.333333zM746.666667 512A192 192 0 00555.733333 724.266667a192 192 0 00211.2-211.2A193.706667 193.706667.0 00746.666667 512zm-469.333334.0c-6.826667.0-13.610667.341333-20.266666 1.066667a192 192 0 00211.2 211.2A192 192 0 00277.333333 512z" fill="#fff" p-id="5608"/></svg></span><span class=navbar-brand__name>Tommas</span></a><div class="td-navbar-nav-scroll ms-md-auto" id=main_navbar><ul class=navbar-nav><li class=nav-item><a class=nav-link href=/en/about/><span>About</span></a></li><li class=nav-item><a class=nav-link href=/en/docs/><span>Documentation</span></a></li><li class=nav-item><a class=nav-link href=/en/community/><span>Community</span></a></li><li class=nav-item><a class="nav-link active" href=/en/blog/><span>Blog</span></a></li><li class=nav-item><a class=nav-link href=https://m.is-local.org/ target=_blank rel=noopener><span>GitHub</span></a></li><li class="nav-item dropdown d-none d-lg-block"><div class=dropdown><a class="nav-link dropdown-toggle" href=# role=button data-bs-toggle=dropdown aria-haspopup=true aria-expanded=false>English</a><ul class=dropdown-menu><li><a class=dropdown-item href=/zh-cn/>中文</a></li></ul></div></li><li class="td-light-dark-menu nav-item dropdown"><svg xmlns="http://www.w3.org/2000/svg" class="d-none"><symbol id="check2" viewBox="0 0 16 16"><path d="M13.854 3.646a.5.5.0 010 .708l-7 7a.5.5.0 01-.708.0l-3.5-3.5a.5.5.0 11.708-.708L6.5 10.293l6.646-6.647a.5.5.0 01.708.0z"/></symbol><symbol id="circle-half" viewBox="0 0 16 16"><path d="M8 15A7 7 0 108 1v14zm0 1A8 8 0 118 0a8 8 0 010 16z"/></symbol><symbol id="moon-stars-fill" viewBox="0 0 16 16"><path d="M6 .278a.768.768.0 01.08.858 7.208 7.208.0 00-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527.0 1.04-.055 1.533-.16a.787.787.0 01.81.316.733.733.0 01-.031.893A8.349 8.349.0 018.344 16C3.734 16 0 12.286.0 7.71.0 4.266 2.114 1.312 5.124.06A.752.752.0 016 .278z"/><path d="M10.794 3.148a.217.217.0 01.412.0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217.0 010 .412l-1.162.387A1.734 1.734.0 0011.593 7.69l-.387 1.162a.217.217.0 01-.412.0l-.387-1.162A1.734 1.734.0 009.31 6.593l-1.162-.387a.217.217.0 010-.412l1.162-.387a1.734 1.734.0 001.097-1.097l.387-1.162zM13.863.099a.145.145.0 01.274.0l.258.774c.115.346.386.617.732.732l.774.258a.145.145.0 010 .274l-.774.258a1.156 1.156.0 00-.732.732l-.258.774a.145.145.0 01-.274.0l-.258-.774a1.156 1.156.0 00-.732-.732l-.774-.258a.145.145.0 010-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"/></symbol><symbol id="sun-fill" viewBox="0 0 16 16"><path d="M8 12a4 4 0 100-8 4 4 0 000 8zM8 0a.5.5.0 01.5.5v2a.5.5.0 01-1 0v-2A.5.5.0 018 0zm0 13a.5.5.0 01.5.5v2a.5.5.0 01-1 0v-2A.5.5.0 018 13zm8-5a.5.5.0 01-.5.5h-2a.5.5.0 010-1h2a.5.5.0 01.5.5zM3 8a.5.5.0 01-.5.5h-2a.5.5.0 010-1h2A.5.5.0 013 8zm10.657-5.657a.5.5.0 010 .707l-1.414 1.415a.5.5.0 11-.707-.708l1.414-1.414a.5.5.0 01.707.0zm-9.193 9.193a.5.5.0 010 .707L3.05 13.657a.5.5.0 01-.707-.707l1.414-1.414a.5.5.0 01.707.0zm9.193 2.121a.5.5.0 01-.707.0l-1.414-1.414a.5.5.0 01.707-.707l1.414 1.414a.5.5.0 010 .707zM4.464 4.465a.5.5.0 01-.707.0L2.343 3.05a.5.5.0 11.707-.707l1.414 1.414a.5.5.0 010 .708z"/></symbol></svg>
<button class="btn btn-link nav-link dropdown-toggle d-flex align-items-center" id=bd-theme type=button aria-expanded=false data-bs-toggle=dropdown data-bs-display=static aria-label="Toggle theme (auto)"><svg class="bi my-1 theme-icon-active"><use href="#circle-half"/></svg></button><ul class="dropdown-menu dropdown-menu-end" aria-labelledby=bd-theme-text><li><button type=button class="dropdown-item d-flex align-items-center" data-bs-theme-value=light aria-pressed=false>
<svg class="bi me-2 opacity-50"><use href="#sun-fill"/></svg>
Light<svg class="bi ms-auto d-none"><use href="#check2"/></svg></button></li><li><button type=button class="dropdown-item d-flex align-items-center" data-bs-theme-value=dark aria-pressed=false>
<svg class="bi me-2 opacity-50"><use href="#moon-stars-fill"/></svg>
Dark<svg class="bi ms-auto d-none"><use href="#check2"/></svg></button></li><li><button type=button class="dropdown-item d-flex align-items-center active" data-bs-theme-value=auto aria-pressed=true>
<svg class="bi me-2 opacity-50"><use href="#circle-half"/></svg>
Auto<svg class="bi ms-auto d-none"><use href="#check2"/></svg></button></li></ul></li></ul></div><div class="d-none d-lg-block"><div class="td-search td-search--offline"><div class=td-search__icon></div><input type=search class="td-search__input form-control" placeholder="Search this site…" aria-label="Search this site…" autocomplete=off data-offline-search-index-json-src=/offline-search-index.a83bbc8f5581e0522a6aa3ed7c1343bc.json data-offline-search-base-href=/ data-offline-search-max-results=10></div></div></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><div id=td-sidebar-menu class=td-sidebar__inner><form class="td-sidebar__search d-flex align-items-center"><div class="td-search td-search--offline"><div class=td-search__icon></div><input type=search class="td-search__input form-control" placeholder="Search this site…" aria-label="Search this site…" autocomplete=off data-offline-search-index-json-src=/offline-search-index.a83bbc8f5581e0522a6aa3ed7c1343bc.json data-offline-search-base-href=/ data-offline-search-max-results=10></div><button class="btn btn-link td-sidebar__toggle d-md-none p-0 ms-3 fas fa-bars" type=button data-bs-toggle=collapse data-bs-target=#td-section-nav aria-controls=td-section-nav aria-expanded=false aria-label="Toggle section navigation"></button></form><nav class="td-sidebar-nav collapse foldable-nav" id=td-section-nav><div class="td-sidebar-nav__section nav-item dropdown d-block d-lg-none"><div class=dropdown><a class="nav-link dropdown-toggle" href=# role=button data-bs-toggle=dropdown aria-haspopup=true aria-expanded=false>English</a><ul class=dropdown-menu><li><a class=dropdown-item href=/zh-cn/>中文</a></li></ul></div></div><ul class="td-sidebar-nav__section pe-md-3 ul-0"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-enblog-li><a href=/en/blog/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section tree-root" id=m-enblog><span>Blog</span></a><ul class=ul-1><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-enblog20240501docsy-0100-release-report-li><input type=checkbox id=m-enblog20240501docsy-0100-release-report-check>
<label for=m-enblog20240501docsy-0100-release-report-check><a href=/en/blog/2024/05/01/docsy-0.10.0-release-report/ title="Docsy 0.10.0 release report" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-enblog20240501docsy-0100-release-report><span>Release 0.10.0</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-enblog20240209docsy-090-release-report-li><input type=checkbox id=m-enblog20240209docsy-090-release-report-check>
<label for=m-enblog20240209docsy-090-release-report-check><a href=/en/blog/2024/02/09/docsy-0.9.0-release-report/ title="Docsy 0.9.0 release report" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-enblog20240209docsy-090-release-report><span>Release 0.9.0</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-enblog20231128docsy-priorities-for-2024-li><input type=checkbox id=m-enblog20231128docsy-priorities-for-2024-check>
<label for=m-enblog20231128docsy-priorities-for-2024-check><a href=/en/blog/2023/11/28/docsy-priorities-for-2024/ title="Docsy priorities for 2024" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-enblog20231128docsy-priorities-for-2024><span>2024 Priorities</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-enblog20230803upgrading-to-docsy-07-bootstrap-5-li><input type=checkbox id=m-enblog20230803upgrading-to-docsy-07-bootstrap-5-check>
<label for=m-enblog20230803upgrading-to-docsy-07-bootstrap-5-check><a href=/en/blog/2023/08/03/upgrading-to-docsy-0.7-bootstrap-5/ title="Upgrading to Docsy 0.7 & Bootstrap 5" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-enblog20230803upgrading-to-docsy-07-bootstrap-5><span>Upgrading to Docsy 0.7</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id=m-enblog20230605migrating-to-bootstrap-52-li><input type=checkbox id=m-enblog20230605migrating-to-bootstrap-52-check checked>
<label for=m-enblog20230605migrating-to-bootstrap-52-check><a href=/en/blog/2023/06/05/migrating-to-bootstrap-5.2/ title="Migrating to Bootstrap 5.2" class="align-left ps-0 active td-sidebar-link td-sidebar-link__page" id=m-enblog20230605migrating-to-bootstrap-52><span class=td-sidebar-nav-active-item>Bootstrap 5 migration</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-enblog20220407hello-docsy-li><input type=checkbox id=m-enblog20220407hello-docsy-check>
<label for=m-enblog20220407hello-docsy-check><a href=/en/blog/2022/04/07/hello-docsy/ title="Hello Docsy!" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-enblog20220407hello-docsy><span>Hello</span></a></label></li></ul></li></ul></nav></div></aside><aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none"><div class="td-page-meta ms-2 pb-1 pt-2 mb-0"><a href=https://github.com/onxs/docsy/tree/main/content/en/blog/2023/bootstrap-5-migration.md class="td-page-meta--view td-page-meta__view" target=_blank rel=noopener><i class="fa-solid fa-file-lines fa-fw"></i> View page source</a>
<a href=https://github.com/onxs/docsy/edit/main/content/en/blog/2023/bootstrap-5-migration.md class="td-page-meta--edit td-page-meta__edit" target=_blank rel=noopener><i class="fa-solid fa-pen-to-square fa-fw"></i> Edit this page</a>
<a href="https://github.com/onxs/docsy/new/main/content/en/blog/2023?filename=change-me.md&amp;value=---%0Atitle%3A+%22Long+Page+Title%22%0AlinkTitle%3A+%22Short+Nav+Title%22%0Aweight%3A+100%0Adescription%3A+%3E-%0A+++++Page+description+for+heading+and+indexes.%0A---%0A%0A%23%23+Heading%0A%0AEdit+this+template+to+create+your+new+page.%0A%0A%2A+Give+it+a+good+name%2C+ending+in+%60.md%60+-+e.g.+%60getting-started.md%60%0A%2A+Edit+the+%22front+matter%22+section+at+the+top+of+the+page+%28weight+controls+how+its+ordered+amongst+other+pages+in+the+same+directory%3B+lowest+number+first%29.%0A%2A+Add+a+good+commit+message+at+the+bottom+of+the+page+%28%3C80+characters%3B+use+the+extended+description+field+for+more+detail%29.%0A%2A+Create+a+new+branch+so+you+can+preview+your+new+file+and+request+a+review+via+Pull+Request.%0A" class="td-page-meta--child td-page-meta__child" target=_blank rel=noopener><i class="fa-solid fa-pen-to-square fa-fw"></i> Create child page</a>
<a href="https://github.com/onxs/docsy/issues/new?title=Migrating%20to%20Bootstrap%205.2" class="td-page-meta--issue td-page-meta__issue" target=_blank rel=noopener><i class="fa-solid fa-list-check fa-fw"></i> Create documentation issue</a>
<a href=https://github.com/onxs/docsy/issues/new class="td-page-meta--project td-page-meta__project-issue" target=_blank rel=noopener><i class="fa-solid fa-list-check fa-fw"></i> Create project issue</a>
<a id=print href=/en/blog/_print/><i class="fa-solid fa-print fa-fw"></i> Print entire section</a></div><div class=td-toc><nav id=TableOfContents><ul><li><a href=#tldr>TL;DR</a></li><li><a href=#technical-details>Technical details</a><ul><li><a href=#mixin-media-breakpoint-down-argument-shift>Mixin <code>media-breakpoint-down()</code> argument shift</a></li><li><a href=#grid-row-and-col-style-changes-are-breaking>Grid <code>.row</code> and <code>.col</code> style changes are breaking</a></li><li><a href=#import-ordering-of-bootstrap-sass-files-functions-first>Import ordering of Bootstrap Sass files: functions first</a></li></ul></li><li><a href=#systematic-and-stepwise-migration>Systematic and stepwise migration</a></li><li><a href=#first-bootstrap-5-release-of-docsy>First Bootstrap 5 release of Docsy</a></li><li><a href=#migrating-docsy-based-projects>Migrating Docsy-based projects</a><ul><li><a href=#bootstrap-migration-page-walkthrough>Bootstrap migration-page walkthrough</a></li><li><a href=#docsy-specific-changes>Docsy-specific changes</a></li></ul></li><li><a href=#give-it-a-try>Give it a try!</a></li></ul></nav></div><div class="taxonomy taxonomy-terms-cloud taxo-tags"><h5 class=taxonomy-title>Tag Cloud</h5><ul class=taxonomy-terms><li><a class=taxonomy-term href=https://t.is-local.org/en/tags/labelling/ data-taxonomy-term=labelling><span class=taxonomy-label>Labelling</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://t.is-local.org/en/tags/structuring-content/ data-taxonomy-term=structuring-content><span class=taxonomy-label>Structuring Content</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://t.is-local.org/en/tags/tagging/ data-taxonomy-term=tagging><span class=taxonomy-label>Tagging</span><span class=taxonomy-count>1</span></a></li></ul></div><div class="taxonomy taxonomy-terms-cloud taxo-categories"><h5 class=taxonomy-title>Categories</h5><ul class=taxonomy-terms><li><a class=taxonomy-term href=https://t.is-local.org/en/categories/taxonomies/ data-taxonomy-term=taxonomies><span class=taxonomy-label>Taxonomies</span><span class=taxonomy-count>1</span></a></li></ul></div></aside><main class="col-12 col-md-9 col-xl-8 ps-md-5 pe-md-4" role=main><a class=td-rss-button title=RSS href=/en/blog/index.xml target=_blank rel=noopener><i class="fa-solid fa-rss" aria-hidden=true></i></a><div class=td-content><h1>Migrating to Bootstrap 5.2</h1><div class=lead>An experience report in migrating Docsy from Bootstrap 4 to 5.2, with insights and instructions.</div><div class="td-byline mb-4">By <b><a href=https://github.com/chalin>Patrice Chalin</a> (<a href=https://www.cncf.io/>CNCF</a> & <a href=/en/blog/2022/04/07/hello-docsy/#introducing-the-psc>Docsy Steering Committee</a>)</b> |
<time datetime=2023-06-05 class=text-body-secondary>Monday, June 05, 2023</time></div><header class=article-meta><p class=reading-time><i class="fa-solid fa-clock" aria-hidden=true></i>&nbsp; 8 minute read &nbsp;</p></header><p><a href=https://docsy.dev>Docsy</a>, and Docsy-based project websites (<a href=https://www.cncf.io/blog/2023/01/19/fast-and-effective-tools-for-cncf-and-open-source-project-websites/>including those
at the CNCF</a>), have been happily using the
<a href=https://getbootstrap.com>Bootstrap CSS framework</a> from Docsy&rsquo;s inception. In
January of this year, Bootstrap 4 (the version used by Docsy for the past few
years) reached its <a href=https://endoflife.date/bootstrap>end of life</a>. While we,
the Docsy steering committee, have been eager to benefit from the Bootstrap 5
improvements, we were concerned about the magnitude of the migration effort, as
well as the impact on downstream projects. Because of this, the migration was
delayed for as long as possible. In December of 2022, when Bootstrap 4 stopped
receiving critical upgrades, we declared
<a href=https://github.com/google/docsy/discussions/1308>Docsy to be in a feature freeze</a>,
and focused our maintenance efforts on the Bootstrap 5 migration.</p><p>This post is about Docsy&rsquo;s migration journey to
<a href=https://blog.getbootstrap.com/2022/07/19/bootstrap-5-2-0/><strong>Bootstrap 5.2</strong></a><sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup>:
it highlights the most notable steps, with a special attention given to the most
surprising aspects of the migration. Our hope is that this post will be useful
to others upgrading to Bootstrap 5, in particular, for downstream Docsy projects
&mdash; though we plan a separate post specifically for downstream projects.</p><h2 id=tldr>TL;DR<a class=td-heading-self-link href=#tldr aria-label="Heading self-link"></a></h2><p>Eager to dive into the Bootstrap migration of your project? Besides carefully
stepping through the
<a href=https://getbootstrap.com/docs/5.2/migration/>Bootstrap migration page</a>, watch
out for the following:</p><ul><li>The <code>media-breakpoint-down()</code> mixin&rsquo;s breakpoint argument needs to be shifted.</li><li>Grid <code>.row</code> and <code>.col</code> style changes are breaking.</li><li>Import ordering of Bootstrap Sass files: import functions first.</li></ul><p>For details, read on.</p><h2 id=technical-details>Technical details<a class=td-heading-self-link href=#technical-details aria-label="Heading self-link"></a></h2><p>If you are well accustomed to upgrading Docsy (and its dependencies) by reading
changelogs and systematically stepping through commits, then this section
provides a summary of some notable changes. In it, I describe technical aspects
of the migration that surprised me, either because they required particular care
in fixing, were undocumented, and/or insufficiently explained in the Bootstrap
<a href=https://getbootstrap.com/docs/5.2/migration/>migration page</a>.</p><h3 id=mixin-media-breakpoint-down-argument-shift>Mixin <code>media-breakpoint-down()</code> argument shift<a class=td-heading-self-link href=#mixin-media-breakpoint-down-argument-shift aria-label="Heading self-link"></a></h3><p>The <a href=https://getbootstrap.com/docs/5.2/layout/breakpoints>breakpoint</a> argument
to the <code>media-breakpoint-down()</code> mixin needs to be bumped up to the next higher
breakpoint. Thankfully, a similar change isn&rsquo;t required of
<code>media-breakpoint-up()</code>. This change will be required of Docsy-based projects.
If you forget to make this non-obviously breaking layout change, your project&rsquo;s
responsive layouts will likely start misbehaving in apparently strange ways.</p><p>For details and an example, see:</p><ul><li><a href=https://getbootstrap.com/docs/5.2/migration/#sass>Sass</a> section of the
migration page</li><li><a href=https://github.com/google/docsy/pull/1367>[BSv5] Adjust <code>media-breakpoint-down()</code> argument · Docsy PR #1367</a></li></ul><h3 id=grid-row-and-col-style-changes-are-breaking>Grid <code>.row</code> and <code>.col</code> style changes are breaking<a class=td-heading-self-link href=#grid-row-and-col-style-changes-are-breaking aria-label="Heading self-link"></a></h3><p>The main issue addressed in this section is not, at the time of writing,
documented in the Bootstrap 5
<a href=https://getbootstrap.com/docs/5.2/migration>migration page</a>.</p><p>There seems to be an assumption, in Bootstrap 5, that the immediate child of a
.<code>row</code> should be a <code>.col</code>. I don&rsquo;t know how strict an assumption this is. While
I have searched for an explicit statement of this assumption in the Bootstrap
documentation, I haven&rsquo;t found one yet &mdash; if you are aware of such a statement,
let us know!</p><p>This assumption wasn&rsquo;t apparent nor was it enforced in Bootstrap 4,
consequently, some of Docsy&rsquo;s layouts failed to respect it. In
<a href=https://github.com/google/docsy/issues/1466>most cases</a>, fixing violations
consisted of simply wrapping a <code>.row</code>&rsquo;s child element in a <code>.col</code>, but the
<a href=https://github.com/google/docsy/blob/v0.7.0/layouts/partials/footer.html>Docsy footer</a>
required a couple of iterations to get right.</p><p>My first footer adjustment reset
<a href=https://developer.mozilla.org/en-US/docs/Web/CSS/flex-shrink><code>flex-shrink</code></a> to
its default value (PR <a href=https://github.com/google/docsy/pull/1373>#1373</a>), but
that turned out to be unnecessary once I better understood how to appropriately
handle row margins (PR <a href=https://github.com/google/docsy/pull/1523>#1523</a>) &mdash;
rows have negative margins, as I
<a href=https://github.com/google/docsy/pull/1502#issue-1678874640>recently learned</a>,
which is something to keep in mind.</p><p>The following Bootstrap 5 <code>.col</code> style changes influenced Docsy-specific style
updates and might impact Docsy-based projects as well:</p><ul><li><code>position</code> is reverted to its
<a href=https://developer.mozilla.org/en-US/docs/Web/CSS/position#values>default value of <code>static</code></a>
from
<a href=https://github.com/twbs/bootstrap/pull/28517/files#diff-41667d8b9901aa9fa52483b538bb9026c287f2c663d2fdc01acffa06888cc087L13><code>relative</code></a></li><li><code>flex-shrink</code>
<a href=https://developer.mozilla.org/en-US/docs/Web/CSS/flex-shrink#values>default value of 1</a>
is overridden and
<a href=https://github.com/twbs/bootstrap/pull/28517/files#diff-41667d8b9901aa9fa52483b538bb9026c287f2c663d2fdc01acffa06888cc087R18>set to 0</a></li></ul><p>References:</p><ul><li><a href=https://github.com/google/docsy/issues/1466>[BSv5] Row/col formatting breaks Docsy components #1466</a>,
in particular<ul><li><a href=https://github.com/google/docsy/pull/1373>[BSv5] Footer fixes: reset flex-shrink, and more·</a>
<a href=https://github.com/google/docsy/pull/1367>Docsy PR</a><a href=https://github.com/google/docsy/pull/1373> #1373</a></li><li><a href=https://github.com/google/docsy/pull/1523>[BSv5] Footer: drop flex-shrink tweak + other adjustments ·</a>
<a href=https://github.com/google/docsy/pull/1367>Docsy PR</a><a href=https://github.com/google/docsy/pull/1523> #1523</a></li></ul></li><li><a href=https://github.com/twbs/bootstrap/issues/25254>Why are all col classes &lsquo;position: relative&rsquo;? · Bootstrap v4 issue #25254</a></li><li><a href=https://github.com/orgs/twbs/discussions/37951>Why flex-shrink 0 for all columns? · Bootstrap discussion #37951</a></li></ul><h3 id=import-ordering-of-bootstrap-sass-files-functions-first>Import ordering of Bootstrap Sass files: functions first<a class=td-heading-self-link href=#import-ordering-of-bootstrap-sass-files-functions-first aria-label="Heading self-link"></a></h3><p>Projects can <a href=https://getbootstrap.com/docs/5.2/customize/sass/>import</a>
Bootstrap Sass sources all in one go (using
<a href=https://github.com/twbs/bootstrap/blob/v5.2.3/scss/bootstrap.scss>bootstrap.scss</a>),
or selectively import any one of the
<a href=https://github.com/twbs/bootstrap/blob/v5.2.3/scss/bootstrap.scss>40+</a>
Bootstrap parts, layouts, and components that they need. Regardless of the
import strategy chosen, due to a Sass map initialization limitation,
Bootstrap-client projects need to perform (emphasis mine):</p><blockquote><p>&mldr; variable customizations &mldr; <strong>after</strong> <code>@import "functions"</code>, but
<strong>before</strong> > <code>@import "variables"</code> and the rest of [the Bootstrap] import
stack.</p></blockquote><p>For details, see
<a href=https://getbootstrap.com/docs/5.2/migration/#new-_mapsscss>New _maps.scss</a>
from the migration page, and
<a href=https://getbootstrap.com/docs/5.2/customize/sass/>Importing</a> from Bootstrap&rsquo;s
Sass customization documentation.</p><p>Having to maintain a custom list of a few dozen imports (even if it&rsquo;s relatively
stable) feels like a maintenance overhead that we should avoid if we can, so in
Docsy&rsquo;s
<a href=https://github.com/google/docsy/blob/v0.7.0/assets/scss/main.scss>main.scss</a>,
we @import &ldquo;functions&rdquo; before Docsy- and project-specific variable overrides,
and then we import the <em>full</em> Bootstrap suite of SCSS. This results in
<a href=https://github.com/twbs/bootstrap/blob/v5.2.3/scss/_functions.scss>_functions.scss</a>
being imported twice, but according to the
<a href=https://sass-lang.com/documentation/at-rules/import>Sass <code>@import</code> documentation</a>:</p><blockquote><p>If the same stylesheet is imported more than once, it will be evaluated again
each time. If it just defines functions and mixins, this usually isn&rsquo;t a big
deal, but if it contains style rules they&rsquo;ll be compiled to CSS more than
once.</p></blockquote><p>The
<a href=https://github.com/twbs/bootstrap/blob/v5.2.3/scss/_functions.scss>_functions.scss</a>
file only contains function definitions, so we should be ok. This seems like a
small cost to pay in contrast to the alternative strategy of inlining the 40+
imports from
<a href=https://github.com/twbs/bootstrap/blob/v5.2.3/scss/bootstrap.scss>bootstrap.scss</a>.</p><p>References:</p><ul><li><a href=https://github.com/google/docsy/pull/1388>[BSv5] Fix SCSS functions import issue &mldr; ·</a>
<a href=https://github.com/google/docsy/pull/1367>Docsy PR</a>
<a href=https://github.com/google/docsy/pull/1388>#1388</a></li><li><a href=https://getbootstrap.com/docs/5.2/migration/#new-_mapsscss>New _maps.scss</a>
from the migration page</li><li><a href=https://getbootstrap.com/docs/5.2/customize/sass/>Importing</a> from
Bootstrap&rsquo;s Sass customization documentation</li></ul><h2 id=systematic-and-stepwise-migration>Systematic and stepwise migration<a class=td-heading-self-link href=#systematic-and-stepwise-migration aria-label="Heading self-link"></a></h2><p>If you&rsquo;ve glanced at the Bootstrap 5
<a href=https://getbootstrap.com/docs/5.2/migration/>migration page</a>, you will see
that there are a <em>lot</em> of changes to address while migrating. To ensure that we
didn&rsquo;t miss any, we systematically walked through the migration guide, and
tracked the status of each change through
<a href=https://github.com/google/docsy/issues/470>Docsy issue #470</a>. Each relevant
migration page section is represented in the issue&rsquo;s opening comment: we either
noted that a migration-page section is irrelevant for Docsy, or added the
section to the tracking issue, and list the PRs containing corresponding
Docsy-specific changes. If you&rsquo;re curious to see how that worked out, see
<a href=https://github.com/google/docsy/issues/470>Upgrade to Bootstrap 5.2 · Docsy issue #470</a>.</p><h2 id=first-bootstrap-5-release-of-docsy>First Bootstrap 5 release of Docsy<a class=td-heading-self-link href=#first-bootstrap-5-release-of-docsy aria-label="Heading self-link"></a></h2><p>A first Bootstrap 5 release of Docsy is planned for the start of June, since
most aspects of the migration have been completed. Some updates have been
postponed, most notably support for right-to-left
(<a href=https://getbootstrap.com/docs/5.2/migration/#rtl>RTL</a>) text. For the complete
list of followup items, see
<a href=https://github.com/google/docsy/issues/1510>BSv5.2 upgrade followup · Docsy issue #1510</a>.</p><p>As was mentioned earlier, this first release will be in support of
<a href=https://blog.getbootstrap.com/2022/07/19/bootstrap-5-2-0/>Bootstrap 5.2</a>. We
plan a separate migration effort to bring Docsy up to
<a href=https://blog.getbootstrap.com/2023/05/30/bootstrap-5-3-0/>Bootstrap 5.3</a>, in
particular to benefit from new
<a href=https://blog.getbootstrap.com/2023/05/30/bootstrap-5-3-0/#custom-color-modes>color modes</a>.
You can track our progress through
<a href=https://github.com/google/docsy/issues/1528>Docsy issue #1528</a>.</p><h2 id=migrating-docsy-based-projects>Migrating Docsy-based projects<a class=td-heading-self-link href=#migrating-docsy-based-projects aria-label="Heading self-link"></a></h2><p>This section contains some preliminary and general guidance for downstream
projects. We are planning a separate post to cover more migration details.</p><h3 id=bootstrap-migration-page-walkthrough>Bootstrap migration-page walkthrough<a class=td-heading-self-link href=#bootstrap-migration-page-walkthrough aria-label="Heading self-link"></a></h3><p>Each project uses its own specific set of Bootstrap features, so walking through
the Bootstrap 5.2 <a href=https://getbootstrap.com/docs/5.2/migration/>migration page</a>
will be advisable for most projects. Of course, one strategy is just to upgrade
and see what breaks or no longer works, but only doing that without a more
systematic follow-up would be ill-advised for all but the most trivial
projects&mdash;consider the challenge in detecting and recovering from a missed
change to a ​​<code>media-breakpoint-down()</code> argument, as discussed earlier.</p><h3 id=docsy-specific-changes>Docsy-specific changes<a class=td-heading-self-link href=#docsy-specific-changes aria-label="Heading self-link"></a></h3><p>During the migration effort we seized the opportunity to do some long overdue
Docsy house cleaning. For details concerning both breaking and non-breaking
Docsy-specific changes, consult the
<a href=https://github.com/google/docsy/blob/main/CHANGELOG.md#070>changelog</a>. In
particular, one non-breaking but important change to be aware of is:
<a href=https://github.com/google/docsy/pull/1462>[BSv5] Docsy variables cleanup &mldr; PR #1462</a>.</p><h2 id=give-it-a-try>Give it a try!<a class=td-heading-self-link href=#give-it-a-try aria-label="Heading self-link"></a></h2><p>To get a first and quick impression of the impact of the upgrade on your
project, it can be informative to simply upgrade Docsy and see what breaks. This
is what the Docsy team did with Bootstrap 5. Only one change actually broke the
build of the Docsy User Guide: the
<a href=https://getbootstrap.com/docs/5.2/migration/#sass>rename of the <code>color-yiq()</code> function</a>.</p><p>After such a smoke test, we recommend systematically walking through the
Bootstrap <a href=https://getbootstrap.com/docs/5.2/migration/>migration page</a> as
described above, and the Docsy
<a href=https://github.com/google/docsy/blob/main/CHANGELOG.md#070>changelog</a>. I used
this approach for <a href=https://opentelemetry.io/>opentelemetry.io</a>, which was the
first Docsy-based project to be upgraded with a pre-release of Bootstrap-5-based
Docsy. The upgrade went
<a href=https://github.com/open-telemetry/opentelemetry.io/issues/2419>quite smoothly</a>.
The main pain point of the OTel website was upgrading to Bootstrap 5
<a href=https://getbootstrap.com/docs/5.2/migration/#forms>forms</a>; an aspect of the
migration that didn&rsquo;t apply to Docsy since Docsy uses only the most trivial of
forms.</p><p>We&rsquo;ll have more to share about the OTel migration effort as well as general
project-specific migration advice in a <a href=/en/blog/2023/08/03/upgrading-to-docsy-0.7-bootstrap-5/>followup blog post</a>. In the meantime,
I hope that you have found parts of this technical article helpful for your own
migration efforts.</p><p><a href=https://www.cncf.io/projects/>CNCF project</a> websites eager to migrate can send
questions to the CNCF
<a href=https://cloud-native.slack.com/archives/CUJ6W5TLM>#techdocs Slack channel</a>.
CNCF and other Docsy-based projects can also
<a href=https://github.com/google/docsy/discussions/new>start a discussion</a> in the
Docsy repository. Happy migrating!</p><p>A big thanks to the Docsy Steering Committee and other reviewers who offered
feedback on earlier drafts of this post, as well as to all those who contributed
to the migration effort.</p><p><em>A version of this article originally appeared as the <a href=https://www.cncf.io/blog/>CNCF blog</a> post
<a href=https://www.cncf.io/blog/2023/06/05/migrating-docsy-to-bootstrap-5/>Migrating Docsy to Bootstrap 5 </a>.</em></p><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p><a href=https://blog.getbootstrap.com/2023/05/30/bootstrap-5-3-0/>Bootstrap 5.3 reached GA</a>
on May 30. There will be a separate migration effort to bring
<a href=https://github.com/google/docsy/issues/1528>Docsy up to Bootstrap 5.3</a>.&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div><ul class="list-unstyled d-flex justify-content-between align-items-center mb-0 pt-5"><li><a href=/en/blog/2022/04/07/hello-docsy/ aria-label="Previous - Hello Docsy!" class="btn btn-primary"><span class=me-1>←</span>Previous</a></li><li><a href=/en/blog/2023/08/03/upgrading-to-docsy-0.7-bootstrap-5/ aria-label="Next - Upgrading to Docsy 0.7 & Bootstrap 5" class="btn btn-primary">Next<span class=ms-1>→</span></a></li></ul><div class=td-page-meta__lastmod>Last modified July 6, 2024: <a href=https://github.com/onxs/docsy/commit/511374047c7c2d9906cf905a8eed6c664710b7f3>docsy 英文官方文档 (5113740)</a></div></div></main></div></div><footer class="td-footer row d-print-none"><div class=container-fluid><div class="row mx-md-2"><div class="td-footer__left col-6 col-sm-4 order-sm-1"><ul class=td-footer__links-list><li class=td-footer__links-item data-bs-toggle=tooltip title="User mailing list" aria-label="User mailing list"><a target=_blank rel=noopener href=https://mail.qq.com/ aria-label="User mailing list"><i class="fa fa-envelope"></i></a></li><li class=td-footer__links-item data-bs-toggle=tooltip title=Twitter aria-label=Twitter><a target=_blank rel=noopener href=https://twitter.com/ aria-label=Twitter><i class="fab fa-x-twitter"></i></a></li><li class=td-footer__links-item data-bs-toggle=tooltip title="Stack Overflow" aria-label="Stack Overflow"><a target=_blank rel=noopener href=https://stackoverflow.co/ aria-label="Stack Overflow"><i class="fab fa-stack-overflow"></i></a></li></ul></div><div class="td-footer__right col-6 col-sm-4 order-sm-3"><ul class=td-footer__links-list><li class=td-footer__links-item data-bs-toggle=tooltip title=GitHub aria-label=GitHub><a target=_blank rel=noopener href=https://github.com/onxs aria-label=GitHub><i class="fab fa-github"></i></a></li><li class=td-footer__links-item data-bs-toggle=tooltip title=Slack aria-label=Slack><a target=_blank rel=noopener href=https://slack.com/intl/zh-cn/ aria-label=Slack><i class="fab fa-slack"></i></a></li><li class=td-footer__links-item data-bs-toggle=tooltip title="Developer mailing list" aria-label="Developer mailing list"><a target=_blank rel=noopener href=https://mail.qq.com/ aria-label="Developer mailing list"><i class="fa fa-envelope"></i></a></li></ul></div><div class="td-footer__center col-12 col-sm-4 py-2 order-sm-2"><span class=td-footer__copyright>&copy;
2024
<span class=td-footer__authors>Tommas | <a href=https://creativecommons.org/licenses/by/4.0>CC BY 4.0</a> |</span></span><span class=td-footer__all_rights_reserved>All Rights Reserved</span><span class=ms-2><a href=https://policies.google.com/privacy target=_blank rel=noopener>Privacy Policy</a></span></div></div></div></footer></div><script src=/js/main.min.f72d00502781aaf278a14088eb2356b1ba2a05ad698a0c43fe86314d74ceab56.js integrity="sha256-9y0AUCeBqvJ4oUCI6yNWsboqBa1pigxD/oYxTXTOq1Y=" crossorigin=anonymous></script><script src=/js/prism.js></script><script src=/js/tabpane-persist.js></script></body></html>