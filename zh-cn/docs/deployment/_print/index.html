<!doctype html><html itemscope itemtype=http://schema.org/WebPage dir=ltr lang=zh-cn class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=canonical type=text/html href=https://t.is-local.org/zh-cn/docs/deployment/><link rel=alternate type=application/rss+xml href=https://t.is-local.org/zh-cn/docs/deployment/index.xml><meta name=robots content="noindex, nofollow"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>预览和部署 | Tommas's Blog</title>
<meta name=description content="部署你的Docsy站点"><meta property="og:url" content="https://t.is-local.org/zh-cn/docs/deployment/"><meta property="og:site_name" content="Tommas's Blog"><meta property="og:title" content="预览和部署"><meta property="og:description" content="部署你的Docsy站点"><meta property="og:locale" content="zh_cn"><meta property="og:type" content="website"><meta itemprop=name content="预览和部署"><meta itemprop=description content="部署你的Docsy站点"><meta itemprop=dateModified content="2024-07-06T19:00:33+08:00"><meta itemprop=wordCount content="1243"><meta name=twitter:card content="summary"><meta name=twitter:title content="预览和部署"><meta name=twitter:description content="部署你的Docsy站点"><link rel=preload href=/scss/main.min.70a5f11d02a68fc8510b2c67b98521496c97eacb949fa12a75ae310aec9ac477.css as=style><link href=/scss/main.min.70a5f11d02a68fc8510b2c67b98521496c97eacb949fa12a75ae310aec9ac477.css rel=stylesheet><script src=https://code.jquery.com/jquery-3.7.1.min.js integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin=anonymous></script><script defer src=https://unpkg.com/lunr@2.3.9/lunr.min.js integrity=sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli crossorigin=anonymous></script><link rel=stylesheet href=/css/prism.css></head><body class=td-section><header><nav class="td-navbar js-navbar-scroll" data-bs-theme=dark><div class="container-fluid flex-column flex-md-row"><a class=navbar-brand href=/zh-cn/><span class="navbar-brand__logo navbar-logo"><svg t="1720198081789" class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" p-id="5607" width="200" height="200" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M512 85.333333A362.666667 362.666667.0 01874.666667 448C874.666667 725.333333 640 960 512 960S149.333333 725.333333 149.333333 448A362.666667 362.666667.0 01512 85.333333zM746.666667 512A192 192 0 00555.733333 724.266667a192 192 0 00211.2-211.2A193.706667 193.706667.0 00746.666667 512zm-469.333334.0c-6.826667.0-13.610667.341333-20.266666 1.066667a192 192 0 00211.2 211.2A192 192 0 00277.333333 512z" fill="#fff" p-id="5608"/></svg></span><span class=navbar-brand__name>Tommas's Blog</span></a><div class="td-navbar-nav-scroll ms-md-auto" id=main_navbar><ul class=navbar-nav><li class=nav-item><a class=nav-link href=/zh-cn/about/><span>关于</span></a></li><li class=nav-item><a class="nav-link active" href=/zh-cn/docs/><span>文档</span></a></li><li class=nav-item><a class=nav-link href=/zh-cn/blog/><span>博客</span></a></li><li class=nav-item><a class=nav-link href=/zh-cn/community/><span>社区</span></a></li><li class="nav-item dropdown d-none d-lg-block"><div class=dropdown><a class="nav-link dropdown-toggle" href=# role=button data-bs-toggle=dropdown aria-haspopup=true aria-expanded=false>中文</a><ul class=dropdown-menu><li><a class=dropdown-item href=/en/docs/deployment/>English</a></li></ul></div></li><li class="td-light-dark-menu nav-item dropdown"><svg xmlns="http://www.w3.org/2000/svg" class="d-none"><symbol id="check2" viewBox="0 0 16 16"><path d="M13.854 3.646a.5.5.0 010 .708l-7 7a.5.5.0 01-.708.0l-3.5-3.5a.5.5.0 11.708-.708L6.5 10.293l6.646-6.647a.5.5.0 01.708.0z"/></symbol><symbol id="circle-half" viewBox="0 0 16 16"><path d="M8 15A7 7 0 108 1v14zm0 1A8 8 0 118 0a8 8 0 010 16z"/></symbol><symbol id="moon-stars-fill" viewBox="0 0 16 16"><path d="M6 .278a.768.768.0 01.08.858 7.208 7.208.0 00-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527.0 1.04-.055 1.533-.16a.787.787.0 01.81.316.733.733.0 01-.031.893A8.349 8.349.0 018.344 16C3.734 16 0 12.286.0 7.71.0 4.266 2.114 1.312 5.124.06A.752.752.0 016 .278z"/><path d="M10.794 3.148a.217.217.0 01.412.0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217.0 010 .412l-1.162.387A1.734 1.734.0 0011.593 7.69l-.387 1.162a.217.217.0 01-.412.0l-.387-1.162A1.734 1.734.0 009.31 6.593l-1.162-.387a.217.217.0 010-.412l1.162-.387a1.734 1.734.0 001.097-1.097l.387-1.162zM13.863.099a.145.145.0 01.274.0l.258.774c.115.346.386.617.732.732l.774.258a.145.145.0 010 .274l-.774.258a1.156 1.156.0 00-.732.732l-.258.774a.145.145.0 01-.274.0l-.258-.774a1.156 1.156.0 00-.732-.732l-.774-.258a.145.145.0 010-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"/></symbol><symbol id="sun-fill" viewBox="0 0 16 16"><path d="M8 12a4 4 0 100-8 4 4 0 000 8zM8 0a.5.5.0 01.5.5v2a.5.5.0 01-1 0v-2A.5.5.0 018 0zm0 13a.5.5.0 01.5.5v2a.5.5.0 01-1 0v-2A.5.5.0 018 13zm8-5a.5.5.0 01-.5.5h-2a.5.5.0 010-1h2a.5.5.0 01.5.5zM3 8a.5.5.0 01-.5.5h-2a.5.5.0 010-1h2A.5.5.0 013 8zm10.657-5.657a.5.5.0 010 .707l-1.414 1.415a.5.5.0 11-.707-.708l1.414-1.414a.5.5.0 01.707.0zm-9.193 9.193a.5.5.0 010 .707L3.05 13.657a.5.5.0 01-.707-.707l1.414-1.414a.5.5.0 01.707.0zm9.193 2.121a.5.5.0 01-.707.0l-1.414-1.414a.5.5.0 01.707-.707l1.414 1.414a.5.5.0 010 .707zM4.464 4.465a.5.5.0 01-.707.0L2.343 3.05a.5.5.0 11.707-.707l1.414 1.414a.5.5.0 010 .708z"/></symbol></svg>
<button class="btn btn-link nav-link dropdown-toggle d-flex align-items-center" id=bd-theme type=button aria-expanded=false data-bs-toggle=dropdown data-bs-display=static aria-label="Toggle theme (auto)"><svg class="bi my-1 theme-icon-active"><use href="#circle-half"/></svg></button><ul class="dropdown-menu dropdown-menu-end" aria-labelledby=bd-theme-text><li><button type=button class="dropdown-item d-flex align-items-center" data-bs-theme-value=light aria-pressed=false>
<svg class="bi me-2 opacity-50"><use href="#sun-fill"/></svg>
Light<svg class="bi ms-auto d-none"><use href="#check2"/></svg></button></li><li><button type=button class="dropdown-item d-flex align-items-center" data-bs-theme-value=dark aria-pressed=false>
<svg class="bi me-2 opacity-50"><use href="#moon-stars-fill"/></svg>
Dark<svg class="bi ms-auto d-none"><use href="#check2"/></svg></button></li><li><button type=button class="dropdown-item d-flex align-items-center active" data-bs-theme-value=auto aria-pressed=true>
<svg class="bi me-2 opacity-50"><use href="#circle-half"/></svg>
Auto<svg class="bi ms-auto d-none"><use href="#check2"/></svg></button></li></ul></li></ul></div><div class="d-none d-lg-block"><div class="td-search td-search--offline"><div class=td-search__icon></div><input type=search class="td-search__input form-control" placeholder=站内搜索… aria-label=站内搜索… autocomplete=off data-offline-search-index-json-src=/offline-search-index.4bcfcdb722d3e34ec70a686d51ef4ffa.json data-offline-search-base-href=/ data-offline-search-max-results=10></div></div></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><main class="col-12 col-md-9 col-xl-8 ps-md-5" role=main><div class=td-content><div class="pageinfo pageinfo-primary d-print-none"><p>这是本节的多页打印视图。
<a href=# onclick="return print(),!1">点击此处打印</a>.</p><p><a href=/zh-cn/docs/deployment/>返回本页常规视图</a>.</p></div><h1 class=title>预览和部署</h1><div class=lead>部署你的Docsy站点</div><ul></ul><div class=content><p>​ 有多种可能的选项可用于部署 Hugo 站点，包括 Netlify、Firebase Hosting、带有 Aerobatic 的 Bitbucket 等等；您可以在 <a href=https://gohugo.io/hosting-and-deployment/>Hosting and Deployment</a>中了解所有这些选项。Hugo 也可以轻松地在本地部署站点，以快速预览内容。</p><h2 id=本地服务您的站点>本地服务您的站点<a class=td-heading-self-link href=#%e6%9c%ac%e5%9c%b0%e6%9c%8d%e5%8a%a1%e6%82%a8%e7%9a%84%e7%ab%99%e7%82%b9 aria-label="Heading self-link"></a></h2><p>​ 根据您的部署选择，您可能希望在开发过程中本地服务您的站点以预览内容更改。要本地服务您的站点：</p><ol><li>确保您从存储库克隆了最新的本地站点文件副本。</li><li>确保您在本地计算机上安装了<a href=/zh-cn/docs/get-started/docsy-as-module/installation-prerequisites/>Prerequisites and installation</a> 中描述的工具，包括 <code>postcss-cli</code>（您需要它来在第一次运行服务器时生成站点资源）。</li><li>在站点根目录中运行 <code>hugo server</code> 命令。默认情况下，您的站点将在 <a href=http://localhost:1313/>http://localhost:1313</a> 上可用。</li></ol><p>​ 现在您正在本地服务站点，Hugo 将监视内容更改并自动刷新您的站点。如果您有多个本地 git 分支，则在切换 git 分支时，本地站点将反映当前分支中的文件。</p><h2 id=构建环境和索引>构建环境和索引<a class=td-heading-self-link href=#%e6%9e%84%e5%bb%ba%e7%8e%af%e5%a2%83%e5%92%8c%e7%b4%a2%e5%bc%95 aria-label="Heading self-link"></a></h2><p>​ 默认情况下，使用<code>hugo</code>构建（而不是在本地使用<code>hugo server</code>）的Hugo站点具有Hugo构建环境<code>production</code>。使用<code>production</code>构建的Docsy站点可以被搜索引擎索引，包括<a href=/zh-cn/docs/adding-content/search/#configure-search-with-a-google-custom-search-engine>Google定制搜索引擎</a>。生产构建还为现场部署优化了JavaScript和CSS（例如，使用压缩后的JS而不是更易读的原始源）。</p><p>​ 如果您不希望搜索引擎索引您的部署站点（例如，如果您仍在开发您的实时站点），或者如果您想构建用于离线分析的开发版本的站点，可以将Hugo构建环境设置为其他环境名称，例如<code>development</code>（在本地使用<code>hugo server</code>的默认设置），<code>test</code>或您选择的另一个环境名称。</p><p>​ 设置的最简单方法是在指定或运行<code>hugo</code>命令时使用<code>-e</code>标志，如以下示例所示：</p><pre tabindex=0><code>hugo -e development
</code></pre><h2 id=使用-netlify-部署>使用 Netlify 部署<a class=td-heading-self-link href=#%e4%bd%bf%e7%94%a8-netlify-%e9%83%a8%e7%bd%b2 aria-label="Heading self-link"></a></h2><p>​ 我们推荐使用<a href=https://www.netlify.com/>Netlify</a>作为一种特别简单的方法，从您的Git提供程序（GitHub、GitLab或BitBucket）提供您的站点，具有<a href=https://www.netlify.com/docs/continuous-deployment/>持续部署</a>，在您或您的用户针对文档存储库创建拉取请求时生成的站点预览等功能。对于开源项目，Netlify是免费的，如果您需要更多支持，则有高级版。</p><p>​ 在使用 Netlify 部署之前，请确保按照 <a href=/zh-cn/docs/get-started/docsy-as-module/>使用主题</a> 中的任何设置说明，将您的站点源代码推送到您选择的 GitHub（或其他提供者）仓库。</p><p>​ 然后按照 <a href=https://gohugo.io/hosting-and-deployment/hosting-on-netlify/>在 Netlify 上托管</a> 中的说明设置 Netlify 帐户（如果您还没有帐户），并授权访问您的 GitHub 或其他 Git 提供者帐户。登录后：</p><ol><li><p>Click <strong>New site from Git</strong>.</p></li><li><p>Click your chosen Git provider, then choose your site repo from your list of repos.</p></li><li><p>In the <strong>Deploy settings</strong> page:</p><ol><li>Specify your <strong>Build command</strong>. The exact build command depends on how you have chosen to use Docsy:<ul><li>If you are using Docsy as a <a href=/zh-cn/docs/get-started/other-options/#option-1-docsy-as-a-git-submodule>Git submodule</a>, specify <code>cd themes/docsy && git submodule update -f --init && cd ../.. && hugo</code>. You need to specify this rather than just <code>hugo</code> so that Netlify can use the theme&rsquo;s submodules.</li><li>If you are using Docsy as a <a href=/zh-cn/docs/get-started/docsy-as-module/>Hugo module</a> or NPM package, you can just specify <code>hugo</code>.</li></ul></li><li>Click <strong>Show advanced</strong>.</li><li>In the <strong>Advanced build settings</strong> section, click <strong>New variable</strong>.</li><li>Specify <code>NODE_VERSION</code> as the <strong>Key</strong> for the new variable, and set its <strong>Value</strong> to the <a href=https://nodejs.org/en/download/>latest LTS version</a> of node.js (minimum recommended version: <code>v20.x</code>).</li><li>In the <strong>Advanced build settings</strong> section, click <strong>New variable</strong>.</li><li>Specify <code>HUGO_VERSION</code> as the <strong>Key</strong> for the new variable, and set its <strong>Value</strong> to the <a href=https://github.com/gohugoio/hugo/releases>latest version</a> of Hugo (minimum recommended version: <code>0.125.4</code>).</li><li>In the <strong>Advanced build settings</strong> section, click <strong>New variable</strong> again.</li><li>Specify <code>GO_VERSION</code> as the <strong>Key</strong> for the new variable, and set its <strong>Value</strong> to the <a href=https://go.dev/dl/>latest version</a> of Go (minimum recommended version: <code>1.21</code>).</li></ol><p>If you don&rsquo;t want your site to be indexed by search engines, you can add an environment flag to your build command to specify a non-<code>production</code> environment, as described in <a href=/zh-cn/docs/deployment/#build-environments-and-indexing>Build environments and indexing</a>.</p></li><li><p>Click <strong>Deploy site</strong>.</p></li></ol><div class="alert alert-primary" role=alert><h4 class=alert-heading>Note</h4><p>Netlify 在构建站点之前使用站点仓库的 <code>package.json</code> 文件来安装任何 JavaScript 依赖项（如 <code>postcss</code>）。如果您没有仅仅复制我们示例站点的此文件版本，请确保您已指定了我们所有的<a href=https://t.is-local.org/zh-cn/docs/get-started/docsy-as-module/installation-prerequisites/#install-postcss>先决条件</a>。</p><p>例如，如果您想使用高于 8.0.0 版本的 <code>postcss-cli</code> 版本，则需要确保您的 <code>package.json</code> 文件还单独指定了 <code>postcss</code>：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span><span style=color:#4e9a06>&#34;devDependencies&#34;</span><span style=color:#a40000>:</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>&#34;autoprefixer&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;^9.8.8&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>&#34;postcss-cli&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;^8.0.0&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>&#34;postcss&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;^8.0.0&#34;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div></div><p>​ 或者，您可以按照相同的说明，但在您的仓库中的 <a href=https://docs.netlify.com/configure-builds/file-based-configuration/><code>netlify.toml</code> 文件</a> 中指定您的<strong>部署设置</strong>，而不是在 <strong>部署设置</strong> 页面中指定。您可以在 <a href=https://github.com/google/docsy/blob/main/netlify.toml>Docsy 主题仓库</a> 中看到一个示例（尽管请注意，此处的构建命令有点不寻常，因为 Docsy 用户指南在本主题仓库<em>内部</em>）。</p><p>​ 如果您已有一个现有的部署，您可以通过在Netlify的站点列表中选择该站点，然后点击<strong>Site settings</strong> - <strong>Build and deploy</strong>来查看和更新相关信息。请确保在<strong>Build image selection</strong>章节中选择了<strong>Ubuntu Xenial 16.04</strong> - 如果您正在创建新的部署，则默认使用此镜像。您需要使用此镜像来运行Hugo的扩展版本。</p><h2 id=deployment-on-github-pages>Deployment on GitHub Pages<a class=td-heading-self-link href=#deployment-on-github-pages aria-label="Heading self-link"></a></h2><p>If your repo is hosted on <a href=https://github.com>GitHub</a>, a simple option is to serve your site with <a href=https://docs.github.com/en/pages/getting-started-with-github-pages/about-github-pages>GitHub Pages</a>. GitHub Pages lets you create project, user, and organization sites; for a project site, your site URL will be <code>http(s)://&lt;username>.github.io/&lt;repository_name></code>, custom domains are also supported. GitHub Pages come with <a href=https://docs.github.com/en/actions/deployment/about-deployments/about-continuous-deployment>continuous deployment</a> using GitHub actions, while the <a href=https://github.com/marketplace/actions>marketplace for actions</a> has useful tools for spell and link checking, deploy previews, and more. Using your existing GitHub account, you can start by using the free plan for publicly available repositories, with premium tiers available for business use cases.</p><p>The Docsy example site repo provides a <a href=https://github.com/google/docsy-example/blob/master/.github/workflows/deploy-github-pages.yml>workflow file</a> that you can use when deploying to GitHub Pages. If you used the example site as template for your new site as described <a href=https://www.docsy.dev/docs/get-started/docsy-as-module/example-site-as-template/>here</a>, you may already have this file in your repo, if not the instructions below show you how to create your own workflow file.</p><p>Before deploying on GitHub Pages, make sure that you&rsquo;ve pushed your site source to your chosen GitHub repo, following any setup instructions in <a href=/zh-cn/docs/get-started/docsy-as-module/>Using the theme</a>.</p><div class="alert alert-primary" role=alert><h4 class=alert-heading>Correct baseURL setting</h4>Make sure to correctly set your site&rsquo;s <code>baseURL</code>, either via hugo&rsquo;s <code>--baseURL '…'</code> command line parameter or inside your your <code>hugo.toml</code>/<code>hugo.yaml</code>/<code>hugo.json</code> configuration file. When deploying to GitHub pages your <code>baseURL</code> needs to be set to <code>https://&lt;USERNAME>.github.io/&lt;repository_name></code>, otherwise your site layout will be broken.</div><ol><li><p>With GitHub Pages, a site is published to the branch <code>gh-pages</code> and served from there by default. You must create this branch first, either in the GitHub web interface or via command line (at the root of your local repo clone):</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span><span style=color:#8f5902>$</span> git checkout -b gh-pages
</span></span><span style=display:flex><span><span style=color:#000;font-style:italic>Switched to a new branch &#39;gh-pages&#39;
</span></span></span></code></pre></div></li><li><p>Push this local branch to your repo:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span><span style=color:#8f5902>$</span> git push --set-upstream origin gh-pages
</span></span><span style=display:flex><span><span style=color:#000;font-style:italic> details omitted …
</span></span></span><span style=display:flex><span><span style=color:#000;font-style:italic> * [new branch]      new -&gt; new
</span></span></span><span style=display:flex><span><span style=color:#000;font-style:italic>branch &#39;gh-pages&#39; set up to track &#39;origin/gh-pages&#39;.
</span></span></span></code></pre></div></li><li><p>Switch back to the <code>main</code> (or <code>work</code>) branch of your repo:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span><span style=color:#8f5902>$</span> git checkout main
</span></span><span style=display:flex><span><span style=color:#000;font-style:italic>Switched to branch &#39;main&#39;
</span></span></span></code></pre></div></li><li><p>Check if you already have the workflow file <code>.github/workflows/deploy-github-pages.yml</code> in your repo. If this file doesn&rsquo;t exist, do the following:</p><ol><li><p>Create a new empty workflow file from the root of your repo, as follows:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span><span style=color:#000;font-style:italic>mkdir -p .github/workflows
</span></span></span><span style=display:flex><span><span style=color:#000;font-style:italic>touch .github/workflows/deploy-github-pages.yml
</span></span></span></code></pre></div></li><li><p>Open the file in an editor of your choice, paste in the code below, and save the file:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>Deployment to GitHub Pages</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>on</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>workflow_dispatch</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>push</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>branches</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span>- <span style=color:#000>main </span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#8f5902;font-style:italic># &lt;-- specify the branch you want to deploy from</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>pull_request</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>env</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>REPO_NAME</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>${{ github.event.repository.name }}</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>REPO_OWNER</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>${{ github.repository_owner }}</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>jobs</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>deploy</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>runs-on</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>ubuntu-22.04</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>concurrency</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>group</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>${{ github.workflow }}-${{ github.ref }}</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>steps</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span>- <span style=color:#204a87;font-weight:700>uses</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>actions/checkout@v4</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>with</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#204a87;font-weight:700>fetch-depth</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#f8f8f8;text-decoration:underline>         </span><span style=color:#8f5902;font-style:italic># Fetch all history for .GitInfo and .Lastmod</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span>- <span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>Setup Hugo</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>uses</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>peaceiris/actions-hugo@v3</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>with</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#204a87;font-weight:700>hugo-version</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#39;0.125.5&#39;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#204a87;font-weight:700>extended</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>true</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span>- <span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>Setup Node</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>uses</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>actions/setup-node@v4</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>with</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#204a87;font-weight:700>node-version</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#39;20&#39;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#204a87;font-weight:700>cache</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#39;npm&#39;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#204a87;font-weight:700>cache-dependency-path</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#39;**/package-lock.json&#39;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span>- <span style=color:#204a87;font-weight:700>run</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>npm ci</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span>- <span style=color:#204a87;font-weight:700>run</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>hugo --baseURL https://${REPO_OWNER}.github.io/${REPO_NAME} --minify</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span>- <span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>Deploy</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>uses</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>peaceiris/actions-gh-pages@v4</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>if</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>${{ github.ref == &#39;refs/heads/main&#39; }}</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#8f5902;font-style:italic># &lt;-- specify same branch as above here</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>with</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#204a87;font-weight:700>github_token</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>${{ secrets.GITHUB_TOKEN }}</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div></li><li><p>Add the file to the staging area, commit your change and push the change to your remote GitHub repo:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span><span style=color:#000;font-style:italic>git add .github/workflows/deploy-github-pages.yml
</span></span></span><span style=display:flex><span><span style=color:#000;font-style:italic>git commit -m &#34;Adding workflow file for site deployment&#34;
</span></span></span><span style=display:flex><span><span style=color:#000;font-style:italic>git push origin
</span></span></span></code></pre></div></li></ol></li><li><p>In your browser, make sure you are logged into your GitHub account. In your repo <strong>Settings</strong>, select <strong>Pages</strong>.</p><ol><li><p>Under <strong>Build and deployment</strong>, select <strong>Deploy from a branch</strong> in the <strong>source</strong> dropdown.</p></li><li><p>From the <strong>branch</strong> dropdown, select <strong>gh-page</strong> as branch where the site is built from.</p></li><li><p>From the <strong>folder</strong> dropdown, select <strong>/(root)</strong> as root directory.</p></li></ol></li></ol><p>That&rsquo;s it! Your deployment workflow for your site is configured.</p><p>Any future push to the branch specified in your workflow file will now trigger the action workflow defined in the workflow file. Additionally, you can trigger the deployment manually by using GitHub web UI.</p><p>Once you push to your repo, you can see the progress of the triggered workflow in the <strong>Actions</strong> tab of the the GitHub web UI:</p><pre tabindex=0><code>URL &#39;Repo actions&#39;: https://github.com/&lt;username&gt;/&lt;repository_name&gt;/actions
</code></pre><p>After the first successful deployment, a new environment <code>github-pages</code> is added to your repo. This is shown at the right of your repo main view (below <strong>Releases</strong> and <strong>Packages</strong>). When you click on this environment, a list of deployments is displayed:</p><pre tabindex=0><code>URL &#39;Repo deployments&#39;: https://github.com/&lt;username&gt;/&lt;repository_name&gt;/deployments/
</code></pre><p>You can find out more in <a href=https://gohugo.io/hosting-and-deployment/hosting-on-github/>Hosting on GitHub</a> in the Hugo documentation.</p><p>For advanced use cases, the <a href=https://github.com/peaceiris/actions-hugo><code>hugo-action</code></a> used inside the workflow file has more configuration options, which are well <a href=https://github.com/marketplace/actions/hugo-setup>documented</a>.</p><h2 id=使用amazon-s3--amazon-cloudfront进行部署>使用Amazon S3 + Amazon CloudFront进行部署<a class=td-heading-self-link href=#%e4%bd%bf%e7%94%a8amazon-s3--amazon-cloudfront%e8%bf%9b%e8%a1%8c%e9%83%a8%e7%bd%b2 aria-label="Heading self-link"></a></h2><p>​ 使用 <a href=https://aws.amazon.com/>Amazon Web Services</a> 发布您的站点有几个选项，如这篇 <a href=https://adrianhall.github.io/cloud/2019/01/31/which-aws-service-for-hosting/>博客文章</a> 所述。本节介绍最基本的选项，即使用 S3 存储桶部署您的站点，并激活 CloudFront CDN（内容分发网络）以加速部署内容的传递。</p><ol><li><p>在您在AWS上<a href=https://portal.aws.amazon.com/billing/signup#/start>注册</a>之后，创建您的S3存储桶，将其与您的域名连接，并将其添加到CloudFront CDN中。这篇<a href=https://www.noorix.com.au/blog/how-to/hosting-static-website-with-aws-s3-cloudfront/>博客文章</a>提供了所有细节，并为整个过程提供了易于遵循的逐步说明。</p></li><li><p>下载并安装最新版本2的AWS<a href=https://docs.aws.amazon.com/cli/latest/userguide/get-started-install.html>命令行界面</a>(CLI)。然后通过发出命令<code>aws configure</code>来配置您的CLI实例(确保您随时掌握您的AWS访问密钥ID和AWS秘密访问密钥)：</p><pre tabindex=0><code>$ aws configure
AWS Access Key ID [None]: AKIAIOSFODNN7EXAMPLE
AWS Secret Access Key [None]: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
Default region name [None]: eu-central-1
Default output format [None]:
</code></pre></li><li><p>通过发出命令<code>aws s3 ls</code>检查您的AWS CLI的正确配置，这应该输出您的S3存储桶列表。</p></li><li><p>在您的<code>hugo.toml</code>/<code>hugo.yaml</code>/<code>hugo.json</code>中添加一个像这样的<code>[deployment]</code>部分：</p><ul class="nav nav-tabs" id=tabs-2 role=tablist><li class=nav-item><button class="nav-link disabled" id=tabs-02-00-tab data-bs-toggle=tab data-bs-target=#tabs-02-00 role=tab aria-controls=tabs-02-00 aria-selected=false>
Configuration file:</button></li><li class=nav-item><button class="nav-link active" id=tabs-02-01-tab data-bs-toggle=tab data-bs-target=#tabs-02-01 role=tab data-td-tp-persist=toml aria-controls=tabs-02-01 aria-selected=true>
hugo.toml</button></li><li class=nav-item><button class=nav-link id=tabs-02-02-tab data-bs-toggle=tab data-bs-target=#tabs-02-02 role=tab data-td-tp-persist=yaml aria-controls=tabs-02-02 aria-selected=false>
hugo.yaml</button></li><li class=nav-item><button class=nav-link id=tabs-02-03-tab data-bs-toggle=tab data-bs-target=#tabs-02-03 role=tab data-td-tp-persist=json aria-controls=tabs-02-03 aria-selected=false>
hugo.json</button></li></ul><div class=tab-content id=tabs-2-content><div class="tab-pane fade" id=tabs-02-00 role=tabpanel aria-labelled-by=tabs-02-00-tab tabindex=2><pre tabindex=0><code></code></pre></div><div class="tab-pane fade show active" id=tabs-02-01 role=tabpanel aria-labelled-by=tabs-02-01-tab tabindex=2><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-toml data-lang=toml><span style=display:flex><span><span style=color:#000;font-weight:700>[</span><span style=color:#000>deployment</span><span style=color:#000;font-weight:700>]</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>[[</span><span style=color:#000>deployment</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>targets</span><span style=color:#000;font-weight:700>]]</span>
</span></span><span style=display:flex><span><span style=color:#000>name</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;aws&#34;</span>
</span></span><span style=display:flex><span><span style=color:#000>URL</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;s3://www.your-domain.tld&#34;</span>
</span></span><span style=display:flex><span><span style=color:#000>cloudFrontDistributionID</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;E9RZ8T1EXAMPLEID&#34;</span></span></span></code></pre></div></div><div class="tab-pane fade" id=tabs-02-02 role=tabpanel aria-labelled-by=tabs-02-02-tab tabindex=2><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>deployment</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>targets</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>* name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>aws</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>URL</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#39;s3://www.your-domain.tld&#39;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>cloudFrontDistributionID</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>E9RZ8T1EXAMPLEID</span></span></span></code></pre></div></div><div class="tab-pane fade" id=tabs-02-03 role=tabpanel aria-labelled-by=tabs-02-03-tab tabindex=2><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span><span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;deployment&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;targets&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>[</span>
</span></span><span style=display:flex><span>      <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&#34;name&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;aws&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&#34;URL&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;s3://www.your-domain.tld&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&#34;cloudFrontDistributionID&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;E9RZ8T1EXAMPLEID&#34;</span>
</span></span><span style=display:flex><span>      <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>]</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span></span></span></code></pre></div></div></div></li><li><p>运行命令<code>hugo --gc --minify</code>将站点资产渲染到您的Hugo构建环境的<code>public/</code>目录中。</p></li><li><p>使用Hugo内置的<code>deploy</code>命令将站点部署到S3：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>hugo deploy
</span></span><span style=display:flex><span>Deploying to target <span style=color:#4e9a06>&#34;aws&#34;</span> <span style=color:#ce5c00;font-weight:700>(</span>www.your-domain.tld<span style=color:#ce5c00;font-weight:700>)</span>
</span></span><span style=display:flex><span>Identified <span style=color:#0000cf;font-weight:700>77</span> file<span style=color:#ce5c00;font-weight:700>(</span>s<span style=color:#ce5c00;font-weight:700>)</span> to upload, totaling 5.3 MB, and <span style=color:#0000cf;font-weight:700>0</span> file<span style=color:#ce5c00;font-weight:700>(</span>s<span style=color:#ce5c00;font-weight:700>)</span> to delete.
</span></span><span style=display:flex><span>Success!
</span></span><span style=display:flex><span>Invalidating CloudFront CDN...
</span></span><span style=display:flex><span>Success!
</span></span></code></pre></div><p>正如您所看到的，发出<code>hugo deploy</code>命令会自动<a href=https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/Invalidation.html>使CloudFront CDN缓存失效</a>。</p></li><li><p>这就是您需要做的全部！从现在开始，您可以使用Hugo内置的<code>deploy</code>命令轻松地将站点部署到S3存储桶！</p></li></ol><p>​ 有关Hugo <code>deploy</code>命令的更多信息，包括命令行选项，请参见此<a href=https://gohugo.io/commands/hugo_deploy>synopsis</a>。特别是，您可能会发现<code>--maxDeletes int</code>选项或<code>--force</code>选项(强制上传所有文件)非常有用。</p><p>使用 GitHub actions 自动化部署</p><div class="alert alert-primary" role=alert><h4 class=alert-heading>Automated deployment with GitHub actions</h4>如果您的站点源代码存储在GitHub存储库中，您可以使用<a href=https://docs.github.com/en/actions>GitHub Actions</a>在将更改提交到GitHub存储库时将站点部署到您的S3存储桶。此工作流程的设置在此<a href=https://capgemini.github.io/development/Using-GitHub-Actions-and-Hugo-Deploy-to-Deploy-to-AWS/>博客文章</a>中有描述。</div><div class="alert alert-primary" role=alert><h4 class=alert-heading>Handling aliases</h4>处理别名
如果您使用<a href=https://gohugo.io/content-management/urls/#aliases>别名</a>进行URL管理，则应查看这篇<a href=https://blog.cavelab.dev/2021/10/hugo-aliases-to-s3-redirects/>博客文章</a>。它解释了如何在使用Amazon S3时将别名转换为正确的<code>301</code>重定向。</div><p>​ 如果S3不能满足您的需求，请考虑使用AWS <a href=https://aws.amazon.com/amplify/console/>Amplify Console</a>。这是一个更先进的持续部署（CD）平台，内置支持Hugo静态网站生成器。在Hugo的官方文档中可以找到一个<a href=https://gohugo.io/hosting-and-deployment/hosting-on-aws-amplify/>入门指南</a>。</p></div></div></main></div></div><footer class="td-footer row d-print-none"><div class=container-fluid><div class="row mx-md-2"><div class="td-footer__left col-6 col-sm-4 order-sm-1"><ul class=td-footer__links-list><li class=td-footer__links-item data-bs-toggle=tooltip title="User mailing list" aria-label="User mailing list"><a target=_blank rel=noopener href=https://mail.qq.com/ aria-label="User mailing list"><i class="fa fa-envelope"></i></a></li><li class=td-footer__links-item data-bs-toggle=tooltip title=Twitter aria-label=Twitter><a target=_blank rel=noopener href=https://twitter.com/ aria-label=Twitter><i class="fab fa-twitter"></i></a></li><li class=td-footer__links-item data-bs-toggle=tooltip title="Stack Overflow" aria-label="Stack Overflow"><a target=_blank rel=noopener href=https://stackoverflow.co/ aria-label="Stack Overflow"><i class="fab fa-stack-overflow"></i></a></li></ul></div><div class="td-footer__right col-6 col-sm-4 order-sm-3"><ul class=td-footer__links-list><li class=td-footer__links-item data-bs-toggle=tooltip title=GitHub aria-label=GitHub><a target=_blank rel=noopener href=https://github.com/onxs aria-label=GitHub><i class="fab fa-github"></i></a></li><li class=td-footer__links-item data-bs-toggle=tooltip title=Slack aria-label=Slack><a target=_blank rel=noopener href=https://slack.com/intl/zh-cn/ aria-label=Slack><i class="fab fa-slack"></i></a></li><li class=td-footer__links-item data-bs-toggle=tooltip title="Developer mailing list" aria-label="Developer mailing list"><a target=_blank rel=noopener href=https://mail.qq.com/ aria-label="Developer mailing list"><i class="fa fa-envelope"></i></a></li></ul></div><div class="td-footer__center col-12 col-sm-4 py-2 order-sm-2"><span class=td-footer__copyright>&copy;
2024
<span class=td-footer__authors>Docsy | <a href=https://creativecommons.org/licenses/by/4.0>CC BY 4.0</a> |</span></span><span class=td-footer__all_rights_reserved>保留所有权利</span><span class=ms-2><a href=https://policies.google.com/privacy target=_blank rel=noopener>隐私政策</a></span></div></div></div></footer></div><script src=/js/main.min.f72d00502781aaf278a14088eb2356b1ba2a05ad698a0c43fe86314d74ceab56.js integrity="sha256-9y0AUCeBqvJ4oUCI6yNWsboqBa1pigxD/oYxTXTOq1Y=" crossorigin=anonymous></script><script src=/js/prism.js></script><script src=/js/tabpane-persist.js></script></body></html>